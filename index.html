<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Katalog Furniture</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
    }

    input {
      padding: 8px;
      width: 250px;
    }

    button {
      padding: 8px 12px;
      cursor: pointer;
    }

    .card {
      border: 1px solid #ccc;
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
    }

    img {
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <h1>Katalog Produk Furniture</h1>

  <h2>Tambah Produk</h2>

  <input type="text" id="name" placeholder="Nama Produk"><br><br>
  <input type="text" id="description" placeholder="Deskripsi"><br><br>
  <input type="text" id="image" placeholder="URL Gambar"><br><br>
  <input type="text" id="size" placeholder="Ukuran (contoh: 120x60)"><br><br>
  <input type="number" id="price" placeholder="Harga"><br><br>

  <button onclick="addProduct()">Tambah Produk</button>

  <hr>

  <h2>Katalog Produk</h2>
  <div id="productList"></div>

  <script type="module">

// Import Firebase dari CDN resmi
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.10.0/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/12.10.0/firebase-database.js";

// Config dari Firebase Console (copy dari sana)
  const firebaseConfig = {
    apiKey: "AIzaSyB9kmOi6YEbpzZoh0QQFbYlLa9-dwahJcc",
    authDomain: "produk-31441.firebaseapp.com",
    databaseURL: "https://produk-31441-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "produk-31441",
    storageBucket: "produk-31441.firebasestorage.app",
    messagingSenderId: "340683244141",
    appId: "1:340683244141:web:51e139fa38be881cd7f564"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const productsRef = ref(db, "products");
    
// Test koneksi
set(ref(db, "connectionTest"), {
  status: "Firebase Connected!"
});

console.log("ðŸ”¥ Firebase Connected");
    


    // ðŸ”¹ Tambah Produk
    window.addProduct = function() {

      const name = document.getElementById("name").value;
      const description = document.getElementById("description").value;
      const image = document.getElementById("image").value;
      const size = document.getElementById("size").value;
      const price = document.getElementById("price").value;

      if (!name || !price) {
        alert("Nama dan harga wajib diisi!");
        return;
      }

      const newProductRef = push(productsRef);

      set(newProductRef, {
        name: name,
        description: description,
        images: [image],
        variants: {
          default: {
            size: size,
            price: Number(price)
          }
        }
      });

      alert("Produk berhasil ditambahkan!");

      document.getElementById("name").value = "";
      document.getElementById("description").value = "";
      document.getElementById("image").value = "";
      document.getElementById("size").value = "";
      document.getElementById("price").value = "";
    };

    // ðŸ”¹ Realtime Tampilkan Produk
    onValue(productsRef, (snapshot) => {

      const data = snapshot.val();
      const productList = document.getElementById("productList");

      productList.innerHTML = "";

      if (!data) {
        productList.innerHTML = "<p>Belum ada produk.</p>";
        return;
      }

      for (let id in data) {

        const product = data[id];
        const variants = Object.values(product.variants);

        let variantHTML = "";

        variants.forEach(v => {
          variantHTML += `
            <p>Ukuran: ${v.size} | Harga: Rp ${v.price.toLocaleString()}</p>
          `;
        });

        productList.innerHTML += `
          <div class="card">
            <img src="${product.images[0]}" width="200"><br><br>
            <h3>${product.name}</h3>
            <p>${product.description}</p>
            ${variantHTML}
          </div>
        `;
      }

    });

  </script>

</body>
</html>

